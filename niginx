ec2に接続。
ssh -i ~/Desktop/aws-barkey-tokyo.pem ec2-user@54.238.70.33

sudo yum update -y

nginx 
sudo amazon-linux-extras install nginx1.12 -y

php
sudo amazon-linux-extras install php7.3 -y
sudo yum install -y --enablerepo=remi,remi-php73 php php-zip php-devel php-mbstring php-pdo php-xml php-bcmath php-mysqlnd

git
sudo yum install git
sudo git clone https://github.com/shiba-git/laravel_sample.git

sudo vi /etc/php-fpm.d/www.conf
sudo vi /etc/nginx/nginx.conf
https://qiita.com/maip0902/items/2fae4944e0115b40dcdc

sudo service nginx start
sudo service php-fpm start 

cd ~
curl -sS https://getcomposer.org/installer | php

$ mkdir ~/bin
$ mv composer.phar ~/bin/composer
$ which composer
~/bin/composer

sudo chmod -R 777 /laravel_sample/
composer install

cp .env.example .env
# .envファイルにある「APP_KEY」(アプリケーションキー)の生成
php artisan key:generate //重要

この時点でアクセス可能

RDSはサブネット系から以下のサイトで作成する。
https://qiita.com/minato-naka/items/03f9dbd09eb3919a501f

sudo rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm
sudo yum install -y mysql-community-server

mysql -u admin -p -h database-1.c4vrm26rsxzg.ap-northeast-1.rds.amazonaws.com

テーブルを作成後、.envで指定すれば完了。あ、マイグレージョンも実行しよう


TOP以外のページが表示されない。
以下のサイトを参考にする。もっとnginxを勉強しないと厳しい。
https://qiita.com/maip0902/items/2fae4944e0115b40dcdc

サーバーは再起動するとnginx非可動になるので注意が必要。

S3ユーザーを作成し、アクセスキーとシークレットキーを発行して
.envに登録するあとcomposerもインストール
https://github.com/thephpleague/flysystem-aws-s3-v3




